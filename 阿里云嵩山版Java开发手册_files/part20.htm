<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>四、安全规约</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part19.htm">&lt; 上一个</a><span> | </span><a href="../阿里云嵩山版Java开发手册.html">内容</a><span> | </span><a href="part21.htm">下一个 &gt;</a></p><p class="s15" style="padding-top: 4pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark36">四、安全规约</a><a name="bookmark37">&zwnj;</a></p><p class="s9" style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">1. <span style=" color: #C00000;">【强制】</span>隶属于用户个人的页面或者功能必须进行权限控制校验。</p><p class="s27" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">说明：<span style=" color: #333;">防止没有做水平权限校验就可随意访问、修改、删除别人的数据，比如查看他人的私信内容。</span></p><p class="s9" style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">2. <span style=" color: #C00000;">【强制】</span>用户敏感数据禁止直接展示，必须对展示数据进行脱敏。</p><p class="s27" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">说明：<span style=" color: #333;">中国大陆个人手机号码显示：139****1219，隐藏中间 4 位，防止隐私泄露。</span></p><p class="s9" style="padding-top: 8pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">3. <span style=" color: #C00000;">【强制】</span>用户输入的 <span class="s12">SQL </span>参数严格使用参数绑定或者 <span class="s12">METADATA </span>字段值限定，防止 <span class="s12">SQL </span>注入，禁止字符串拼接 <span class="s12">SQL </span>访问数据库。</p><p class="s18" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">反例：<span style=" color: #333;">某系统签名大量被恶意修改，即是因为对于危险字符 # --没有进行转义，导致数据库更新时，where</span></p><p style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">后边的信息被注释掉，对全库进行更新。</p><p class="s9" style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">4. <span style=" color: #C00000;">【强制】</span>用户请求传入的任何参数必须做有效性验证。</p><p class="s27" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">说明：<span style=" color: #333;">忽略参数校验可能导致：</span></p><p class="s74" style="padding-top: 1pt;padding-left: 60pt;text-indent: 0pt;text-align: left;"><span class="s75"> </span><span class="p">page size 过大导致内存溢出</span></p><p class="s74" style="padding-top: 1pt;padding-left: 60pt;text-indent: 0pt;text-align: left;"><span class="s75"> </span><span class="p">恶意 order by 导致数据库慢查询</span></p><p class="s74" style="padding-top: 1pt;padding-left: 60pt;text-indent: 0pt;text-align: left;"><span class="s75"> </span><span class="p">缓存击穿</span></p><p class="s74" style="padding-top: 1pt;padding-left: 60pt;text-indent: 0pt;text-align: left;"><span class="s75"> </span><span class="p">SSRF</span></p><p class="s74" style="padding-top: 1pt;padding-left: 60pt;text-indent: 0pt;text-align: left;"><span class="s75"> </span><span class="p">任意重定向</span></p><p class="s74" style="padding-top: 1pt;padding-left: 60pt;text-indent: 0pt;text-align: left;"><span class="s75"> </span><span class="p">SQL 注入，Shell 注入，反序列化注入</span></p><p class="s74" style="padding-top: 1pt;padding-left: 60pt;text-indent: 0pt;text-align: left;"><span class="s75"> </span><span class="p">正则输入源串拒绝服务 ReDoS</span></p><p style="padding-top: 5pt;padding-left: 43pt;text-indent: 0pt;line-height: 110%;text-align: left;">Java 代码用正则来验证客户端的输入，有些正则写法验证普通用户输入没有问题，但是如果攻击人员使用的是特殊构造的字符串来验证，有可能导致死循环的结果。</p><p class="s9" style="padding-top: 5pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">5. <span style=" color: #C00000;">【强制】</span>禁止向 <span class="s12">HTML </span>页面输出未经安全过滤或未正确转义的用户数据。</p><p class="s9" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">6. <span style=" color: #C00000;">【强制】</span>表单、<span class="s12">AJAX </span>提交必须执行 <span class="s12">CSRF </span>安全验证。</p><p class="s27" style="padding-left: 42pt;text-indent: 0pt;line-height: 109%;text-align: justify;">说明：<span style=" color: #333;">CSRF(Cross-site request forgery)跨站请求伪造是一类常见编程漏洞。对于存在 CSRF 漏洞的应用/网站，攻击者可以事先构造好 URL，只要受害者用户一访问，后台便在用户不知情的情况下对数据库中用户参数进行相应修改。</span></p><p class="s9" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: justify;">7. <span style=" color: #C00000;">【强制】</span>URL 外部重定向传入的目标地址必须执行白名单过滤。</p><p class="s9" style="padding-top: 7pt;padding-left: 42pt;text-indent: -18pt;text-align: justify;">8. <span style=" color: #C00000;">【强制】</span>在使用平台资源，譬如短信、邮件、电话、下单、支付，必须实现正确的防重放的机制，如数量限制、疲劳度控制、验证码校验，避免被滥刷而导致资损。</p><p class="s27" style="padding-left: 42pt;text-indent: 0pt;line-height: 110%;text-align: left;">说明：<span style=" color: #333;">如注册时发送验证码到手机，如果没有限制次数和频率，那么可以利用此功能骚扰到其它用户，并造成短信平台资源浪费。</span></p><p class="s2" style="padding-top: 6pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">9. <span style=" color: #FFC000;">【推荐】</span><span style=" color: #333;">发贴、评论、发送即时消息等用户生成内容的场景必须实现防刷、文本内容违禁词过滤等风控策略。</span></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part19.htm">&lt; 上一个</a><span> | </span><a href="../阿里云嵩山版Java开发手册.html">内容</a><span> | </span><a href="part21.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
