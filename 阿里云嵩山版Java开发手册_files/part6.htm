<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>(三) 代码格式</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part5.htm">&lt; 上一个</a><span> | </span><a href="../阿里云嵩山版Java开发手册.html">内容</a><span> | </span><a href="part7.htm">下一个 &gt;</a></p><p class="s16" style="padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark5">(三) 代码格式</a><a name="bookmark17">&zwnj;</a></p><p class="s9" style="padding-top: 5pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">1. <span style=" color: #C00000;">【强制】</span>如果是大括号内为空，则简洁地写成{}即可，大括号中间无需换行和空格；如果是非空代码块则：</p><p style="padding-left: 47pt;text-indent: 0pt;text-align: left;">1） 左大括号前不换行。</p><p style="padding-top: 1pt;padding-left: 47pt;text-indent: 0pt;text-align: left;">2） 左大括号后换行。</p><p style="padding-top: 1pt;padding-left: 47pt;text-indent: 0pt;text-align: left;">3） 右大括号前换行。</p><p style="padding-top: 1pt;padding-left: 47pt;text-indent: 0pt;text-align: left;">4） 右大括号后还有 else 等代码则不换行；表示终止的右大括号后必须换行。</p><p class="s9" style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;line-height: 22pt;text-align: left;">2. <span style=" color: #C00000;">【强制】</span>左小括号和右边相邻字符之间不出现空格<span class="s12">；</span>右小括号和左边相邻字符之间也不出现空</p><p class="s9" style="padding-left: 42pt;text-indent: 0pt;line-height: 22pt;text-align: left;">格；而左大括号前需要加空格。详见第 5 条下方正例提示。</p><p style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><span class="s18">反例：</span><span class="p">if (</span><span class="s40" style=" background-color: #C0C0C0;">空格 </span><span class="p">a == b </span><span class="s40" style=" background-color: #C0C0C0;">空格</span><span class="p">)</span></p><p class="s9" style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">3. <span style=" color: #C00000;">【强制】</span>if/for/while/switch/do 等保留字与括号之间都必须加空格。</p><p class="s9" style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">4. <span style=" color: #C00000;">【强制】</span>任何二目、三目运算符的左右两边都需要加一个空格。</p><p class="s27" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">说明：<span style=" color: #333;">包括赋值运算符=、逻辑运算符&amp;&amp;、加减乘除符号等。</span></p><p class="s9" style="padding-top: 7pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">5. <span style=" color: #C00000;">【强制】</span>采用 4 个空格缩进，禁止使用 Tab 字符。</p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 109%;text-align: left;"><span class="s27">说明：</span><span class="p">如果使用 Tab 缩进，必须设置 1 个 Tab 为 4 个空格。IDEA 设置 Tab 为 4 个空格时，请勿勾选 </span><span class="s19">Use tab character</span><span class="p">；而在 Eclipse 中，必须勾选 </span><span class="s41" style=" background-color: #F8F1F4;">insert spaces for tabs</span><span class="p">。</span></p><p class="s24" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">正例： <span style=" color: #333;">（涉及 1-5 点）</span></p><p class="s30" style="padding-top: 7pt;padding-left: 54pt;text-indent: 0pt;line-height: 15pt;text-align: left;"><span style=" color: #07A;">public static void </span><span style=" color: #DD4968;">main</span>(<span style=" color: #000;">String</span>[] <span style=" color: #000;">args</span>) {</p><p class="s31" style="padding-left: 72pt;text-indent: 0pt;line-height: 14pt;text-align: left;">// 缩进 4 个空格</p><p class="s29" style="padding-left: 72pt;text-indent: 0pt;line-height: 14pt;text-align: left;">String say <span style=" color: #A67E58;">= </span><span style=" color: #50A04F;">&quot;hello&quot;</span><span style=" color: #999;">;</span></p><p class="s31" style="padding-left: 72pt;text-indent: 0pt;line-height: 14pt;text-align: left;">// 运算符的左右必须有一个空格</p><p class="s28" style="padding-left: 72pt;text-indent: 0pt;line-height: 14pt;text-align: left;">int <span style=" color: #000;">flag </span><span style=" color: #A67E58;">= </span><span style=" color: #976800;">0</span><span style=" color: #999;">;</span></p><p class="s31" style="padding-left: 72pt;text-indent: 0pt;line-height: 14pt;text-align: left;">// 关键词 if 与括号之间必须有一个空格，括号内的 f 与左括号，0 与右括号不需要空格</p><p class="s30" style="padding-left: 90pt;text-indent: -18pt;line-height: 84%;text-align: left;"><span style=" color: #07A;">if </span>(<span style=" color: #000;">flag </span><span style=" color: #A67E58;">== </span><span style=" color: #976800;">0</span>) { <span style=" color: #000;">System</span>.<span style=" color: #000;">out</span>.<span style=" color: #DD4968;">println</span>(<span style=" color: #000;">say</span>);</p><p class="s30" style="padding-left: 72pt;text-indent: 0pt;line-height: 14pt;text-align: left;">}</p><p class="s31" style="padding-left: 72pt;text-indent: 0pt;line-height: 14pt;text-align: left;">// 左大括号前加空格且不换行；左大括号后换行</p><p class="s30" style="padding-left: 90pt;text-indent: -18pt;line-height: 85%;text-align: left;"><span style=" color: #07A;">if </span>(<span style=" color: #000;">flag </span><span style=" color: #A67E58;">== </span><span style=" color: #976800;">1</span>) { <span style=" color: #000;">System</span>.<span style=" color: #000;">out</span>.<span style=" color: #DD4968;">println</span>(<span style=" color: #50A04F;">&quot;world&quot;</span>);</p><p class="s31" style="padding-left: 90pt;text-indent: 0pt;line-height: 13pt;text-align: left;">// 右大括号前换行，右大括号后有 else，不用换行</p><p class="s30" style="padding-left: 72pt;text-indent: 0pt;line-height: 14pt;text-align: left;">} <span style=" color: #07A;">else </span>{</p><p class="s30" style="padding-left: 90pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><span style=" color: #000;">System</span>.<span style=" color: #000;">out</span>.<span style=" color: #DD4968;">println</span>(<span style=" color: #50A04F;">&quot;ok&quot;</span>);</p><p class="s31" style="padding-left: 90pt;text-indent: 0pt;line-height: 15pt;text-align: left;">// 在右大括号后直接结束，则必须换行</p><p class="s30" style="padding-left: 72pt;text-indent: 0pt;line-height: 13pt;text-align: left;">}</p><p class="s30" style="padding-left: 54pt;text-indent: 0pt;line-height: 15pt;text-align: left;">}</p><p class="s9" style="padding-top: 3pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">6. <span style=" color: #C00000;">【强制】</span>注释的双斜线与注释内容之间有且仅有一个空格。</p><p class="s24" style="padding-left: 42pt;text-indent: 0pt;line-height: 19pt;text-align: left;">正例：</p><p class="s31" style="padding-left: 54pt;text-indent: 0pt;line-height: 17pt;text-align: left;">// 这是示例注释，请注意在双斜线之后有一个空格</p><p class="s29" style="padding-left: 54pt;text-indent: 0pt;text-align: left;">String commentString <span style=" color: #A67E58;">= </span><span style=" color: #07A;">new </span>String<span style=" color: #999;">();</span></p><p class="s9" style="padding-top: 9pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">7. <span style=" color: #C00000;">【强制】</span>在进行类型强制转换时，右括号与强制转换值之间不需要任何空格隔开。</p><p class="s24" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">正例：</p><p class="s29" style="padding-left: 54pt;text-indent: 0pt;line-height: 15pt;text-align: left;"><span style=" color: #07A;">double </span>first <span style=" color: #A67E58;">= </span>3.2d<span style=" color: #999;">;</span></p><p class="s30" style="padding-left: 54pt;text-indent: 0pt;line-height: 15pt;text-align: left;"><span style=" color: #07A;">int </span><span style=" color: #000;">second </span><span style=" color: #A67E58;">= </span>(<span style=" color: #07A;">int</span>)<span style=" color: #000;">first </span><span style=" color: #A67E58;">+ </span><span style=" color: #990054;">2</span>;</p><p class="s9" style="padding-top: 3pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">8. <span style=" color: #C00000;">【强制】</span>单行字符数限制不超过 120 个，超出需要换行，换行时遵循如下原则：</p><p style="padding-left: 47pt;text-indent: 0pt;text-align: left;">1）第二行相对第一行缩进 4 个空格，从第三行开始，不再继续缩进，参考示例。</p><p style="padding-top: 1pt;padding-left: 47pt;text-indent: 0pt;text-align: left;">2）运算符与下文一起换行。</p><p style="padding-top: 1pt;padding-left: 47pt;text-indent: 0pt;text-align: left;">3）方法调用的点符号与下文一起换行。</p><p style="padding-top: 1pt;padding-left: 47pt;text-indent: 0pt;text-align: left;">4）方法调用中的多个参数需要换行时，在逗号后进行。</p><p style="padding-top: 1pt;padding-left: 42pt;text-indent: 5pt;line-height: 110%;text-align: left;">5）在括号前不要换行，见<span style=" color: #FF4500;">反例</span>。<span style=" color: #009757;">正例：</span></p><p class="s29" style="padding-left: 54pt;text-indent: 0pt;line-height: 13pt;text-align: left;">StringBuilder sb <span style=" color: #A67E58;">= </span><span style=" color: #07A;">new </span>StringBuilder<span style=" color: #999;">();</span></p><p class="s31" style="padding-left: 54pt;text-indent: 0pt;line-height: 14pt;text-align: left;">// 超过 120 个字符的情况下，换行缩进 4 个空格，并且方法前的点号一起换行</p><p class="s30" style="padding-left: 54pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><span style=" color: #000;">sb</span>.<span style=" color: #DD4968;">append</span>(<span style=" color: #50A04F;">&quot;yang&quot;</span>).<span style=" color: #DD4968;">append</span>(<span style=" color: #50A04F;">&quot;hao&quot;</span>)...</p><p class="s30" style="padding-left: 90pt;text-indent: 0pt;line-height: 14pt;text-align: left;">.<span style=" color: #DD4968;">append</span>(<span style=" color: #50A04F;">&quot;chen&quot;</span>)...</p><p class="s30" style="padding-left: 90pt;text-indent: 0pt;line-height: 14pt;text-align: left;">.<span style=" color: #DD4968;">append</span>(<span style=" color: #50A04F;">&quot;chen&quot;</span>)...</p><p class="s30" style="padding-left: 90pt;text-indent: 0pt;line-height: 15pt;text-align: left;">.<span style=" color: #DD4968;">append</span>(<span style=" color: #50A04F;">&quot;chen&quot;</span>);</p><p class="s18" style="padding-left: 42pt;text-indent: 0pt;line-height: 19pt;text-align: left;">反例：</p><p class="s29" style="padding-left: 54pt;text-indent: 0pt;line-height: 15pt;text-align: left;">StringBuilder sb <span style=" color: #A67E58;">= </span><span style=" color: #07A;">new </span>StringBuilder<span style=" color: #999;">();</span></p><p class="s31" style="padding-left: 54pt;text-indent: 0pt;line-height: 14pt;text-align: left;">// 超过 120 个字符的情况下，不要在括号前换行</p><p class="s30" style="padding-left: 72pt;text-indent: -18pt;line-height: 84%;text-align: left;"><span style=" color: #000;">sb</span>.<span style=" color: #DD4968;">append</span>(<span style=" color: #50A04F;">&quot;you&quot;</span>).<span style=" color: #DD4968;">append</span>(<span style=" color: #50A04F;">&quot;are&quot;</span>)...<span style=" color: #000;">append </span>(<span style=" color: #50A04F;">&quot;lucky&quot;</span>);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s31" style="padding-left: 54pt;text-indent: 0pt;line-height: 15pt;text-align: left;">// 参数很多的方法调用可能超过 120 个字符，逗号后才是换行处</p><p class="s30" style="padding-left: 54pt;text-indent: 0pt;line-height: 15pt;text-align: left;"><span style=" color: #DD4968;">method</span>(<span style=" color: #000;">args1</span>, <span style=" color: #000;">args2</span>, <span style=" color: #000;">args3</span>, ...</p><p class="s30" style="padding-left: 72pt;text-indent: 0pt;text-align: left;">, <span style=" color: #000;">argsX</span>);</p><p class="s9" style="padding-top: 9pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">9. <span style=" color: #C00000;">【强制】</span>方法参数在定义和传入时，多个参数逗号后面必须加空格。</p><p style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><span style=" color: #009757;">正例：</span>下例中实参的 <span style=" color: #00F;">args1</span>，后边必须要有一个空格。</p><p class="s43" style="padding-left: 78pt;text-indent: 0pt;text-align: left;">method(args1, args2, args3);</p><p class="s9" style="padding-top: 9pt;padding-left: 42pt;text-indent: -18pt;text-align: left;">10. <span style=" color: #C00000;">【强制】</span>IDE 的 text file encoding 设置为 UTF-8; IDE 中文件的换行符使用 Unix 格式，不要使用 Windows 格式。</p><p class="s9" style="padding-left: 24pt;text-indent: 0pt;line-height: 22pt;text-align: left;">11. <span style=" color: #FFC000;">【推荐】</span><span style=" color: #23292D;">单个方法的总行数不超过 80 行。</span></p><p class="s27" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">说明：<span style=" color: #23292D;">除注释之外的方法签名、左右大括号、方法内代码、空行、回车及任何不可见字符的总行数不超过</span></p><p class="s26" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">80 行。</p><p class="s24" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;line-height: 109%;text-align: left;">正例：<span style=" color: #23292D;">代码逻辑分清红花和绿叶，个性和共性，绿叶逻辑单独出来成为额外方法，使主干代码更加清晰；共性逻辑抽取成为共性方法，便于复用和维护。</span></p><p class="s9" style="padding-top: 3pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">12. <span style=" color: #FFC000;">【推荐】</span>没有必要增加若干空格来使变量的赋值等号与上一行对应位置的等号对齐。</p><p class="s24" style="padding-left: 42pt;text-indent: 0pt;line-height: 19pt;text-align: left;">正例：</p><p class="s28" style="padding-top: 1pt;padding-left: 54pt;text-indent: 0pt;line-height: 84%;text-align: left;">int <span style=" color: #000;">one </span><span style=" color: #A67E58;">= </span><span style=" color: #976800;">1</span><span style=" color: #999;">; </span>long <span style=" color: #000;">two </span><span style=" color: #A67E58;">= </span><span style=" color: #976800;">2L; </span>float <span style=" color: #000;">three </span><span style=" color: #A67E58;">= </span><span style=" color: #976800;">3F</span><span style=" color: #999;">;</span></p><p class="s29" style="padding-left: 54pt;text-indent: 0pt;line-height: 15pt;text-align: left;">StringBuilder sb <span style=" color: #A67E58;">= </span><span style=" color: #07A;">new </span>StringBuilder<span style=" color: #999;">();</span></p><p class="s27" style="padding-left: 42pt;text-indent: 0pt;line-height: 110%;text-align: left;">说明：<span style=" color: #333;">增加 sb 这个变量，如果需要对齐，则给one、two、three 都要增加几个空格，在变量比较多的情况下，是非常累赘的事情。</span></p><p class="s9" style="padding-top: 5pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">13. <span style=" color: #FFC000;">【推荐】</span>不同逻辑、不同语义、不同业务的代码之间插入一个空行分隔开来以提升可读性。</p><p style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><span style=" color: #967B00;">说明：</span>任何情形，没有必要插入<span style=" color: #00F;">多个空行</span>进行隔开。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part5.htm">&lt; 上一个</a><span> | </span><a href="../阿里云嵩山版Java开发手册.html">内容</a><span> | </span><a href="part7.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
